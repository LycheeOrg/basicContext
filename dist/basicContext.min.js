!function(t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):window.basicContext=t()}(function(){let s=null;function c(t={}){return null!=t.fn&&(!1!==t.visible&&(!0!==t.disabled&&(u(`td[data-num='${t.num}']`).onclick=t.fn,u(`td[data-num='${t.num}']`).oncontextmenu=t.fn,!0)))}const i="item",a="separator",u=function(t=""){return document.querySelector(".basicContext "+t)},r=function(t,n){let e="",l="";var o;return!1==([o={}]=[t],!0==(0===Object.keys(o).length)&&(o.type=a),null==o.type&&(o.type=i),null==o.class&&(o.class=""),!1!==o.visible&&(o.visible=!0),null==o.icon&&(o.icon=null),null==o.title&&(o.title="Undefined"),!0!==o.disabled&&(o.disabled=!1),!0===o.disabled&&(o.class+=" basicContext__item--disabled"),null!=o.fn||o.type===a||!1!==o.disabled||(console.warn(`Missing fn for item '${o.title}'`),!1))||!1===t.visible?"":(t.num=n,null!==t.icon&&(l=`<span class='basicContext__icon ${t.icon}'></span>`),t.type===i?e=`
		       <tr class='basicContext__item ${t.class}'>
		           <td class='basicContext__data' data-num='${t.num}'>${l}${t.title}</td>
		       </tr>
		       `:t.type===a&&(e=`
		       <tr class='basicContext__item basicContext__item--separator'></tr>
		       `),e)},d=function(t={}){var n={x:t.clientX,y:t.clientY};return"touchend"!==t.type||null!=n.x&&null!=n.y||null!=(t=t.changedTouches)&&0<t.length&&(n.x=t[0].clientX,n.y=t[0].clientY),(null==n.x||n.x<0)&&(n.x=0),(null==n.y||n.y<0)&&(n.y=0),n};function f(){var t;return!1!==n()&&((t=document.querySelector(".basicContextContainer")).parentElement.removeChild(t),null!=s&&(document.body.style.overflow=s,s=null),!0)}const n=function(){var t=u();return null!=t&&0!==t.length};return{ITEM:i,SEPARATOR:a,show:function(t,n,e,l){var o=function(t){let e="";return e+=`
	        <div class='basicContextContainer'>
	            <div class='basicContext'>
	                <table>
	                    <tbody>
	        `,t.forEach((t,n)=>e+=r(t,n)),e+=`
	                    </tbody>
	                </table>
	            </div>
	        </div>
	        `}(t),o=(document.body.insertAdjacentHTML("beforeend",o),null==s&&(s=document.body.style.overflow,document.body.style.overflow="hidden"),u()),i=function(t,n){t=d(t);let e=t.x,l=t.y,o=window.innerWidth,i=window.innerHeight,s=n.offsetWidth,c=n.offsetHeight;e+s>o&&(e-=e+s-o),l+c>i&&(l-=l+c-i),c>i&&(l=0,n.classList.add("basicContext--scrollable"));n=t.x-e,t=t.y-l;return{x:e,y:l,rx:n,ry:t}}(n,o);return o.style.left=i.x+"px",o.style.top=i.y+"px",o.style.transformOrigin=`${i.rx}px ${i.ry}px`,o.style.opacity=1,null==e&&(e=f),o.parentElement.onclick=e,o.parentElement.oncontextmenu=e,t.forEach(c),"function"==typeof n.preventDefault&&n.preventDefault(),"function"==typeof n.stopPropagation&&n.stopPropagation(),"function"==typeof l&&l(),!0},visible:n,close:f}});